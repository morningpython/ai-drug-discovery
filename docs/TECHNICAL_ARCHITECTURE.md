# AI ì‹ ì•½ ê°œë°œ í”„ë¡œì íŠ¸ - ê¸°ìˆ  ì•„í‚¤í…ì²˜ ë° ê°œë°œ ê³„íš

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  ì›¹ ì•±       â”‚  â”‚  REST API    â”‚  â”‚  CLI ë„êµ¬    â”‚          â”‚
â”‚  â”‚  (React)     â”‚  â”‚  (FastAPI)   â”‚  â”‚  (Python)    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI/ML ì½”ì–´ ì—”ì§„                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ë¶„ì ìƒì„±    â”‚  â”‚ ADMET ì˜ˆì¸¡   â”‚  â”‚ ë„í‚¹ ì‹œë®¬ë ˆì´ì…˜â”‚         â”‚
â”‚  â”‚ (Transformer)â”‚  â”‚ (Multi-task) â”‚  â”‚ (AutoDock)   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ë¶„ì ìµœì í™”  â”‚  â”‚ ë‹¨ë°±ì§ˆ ì˜ˆì¸¡  â”‚  â”‚ ìœ ì‚¬ì„± ê²€ìƒ‰  â”‚          â”‚
â”‚  â”‚ (RL/PPO)     â”‚  â”‚ (AlphaFold)  â”‚  â”‚ (Vector DB)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë°ì´í„° ë ˆì´ì–´ (Azure)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Cosmos DB    â”‚  â”‚ Blob Storage â”‚  â”‚ Vector Searchâ”‚          â”‚
â”‚  â”‚ (ë¶„ì ë°ì´í„°)â”‚  â”‚ (ëª¨ë¸/ê²°ê³¼)  â”‚  â”‚ (ì„ë² ë”©)     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤                               â”‚
â”‚  ChEMBL â”‚ PubChem â”‚ DrugBank â”‚ PDB â”‚ AlphaFold DB â”‚ PubMed     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

### 1. í”„ë¡ íŠ¸ì—”ë“œ (ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜)

#### í•µì‹¬ í”„ë ˆì„ì›Œí¬
```typescript
// Package.json
{
  "dependencies": {
    "react": "^18.2.0",
    "typescript": "^5.3.0",
    "next.js": "^14.0.0",          // SSR ë° ë¼ìš°íŒ…
    "tailwindcss": "^3.4.0",       // ìŠ¤íƒ€ì¼ë§
    "shadcn-ui": "latest",         // UI ì»´í¬ë„ŒíŠ¸
    "@tanstack/react-query": "^5.0.0",  // ë°ì´í„° í˜ì¹­
    "zustand": "^4.4.0",           // ìƒíƒœ ê´€ë¦¬
  }
}
```

#### ë¶„ì ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Ketcher**: 2D ë¶„ì ê·¸ë¦¬ê¸° (React ì»´í¬ë„ŒíŠ¸)
- **3Dmol.js**: 3D ë¶„ì ë° ë‹¨ë°±ì§ˆ ë Œë”ë§
- **NGL Viewer**: ê³ ì„±ëŠ¥ ë‹¨ë°±ì§ˆ-ë¦¬ê°„ë“œ ì‹œê°í™”
- **Plotly.js**: ADMET íŠ¹ì„± ê·¸ë˜í”„, ìµœì í™” ê²½ë¡œ ì‹œê°í™”

#### ì£¼ìš” í˜ì´ì§€/ê¸°ëŠ¥
1. **ëŒ€ì‹œë³´ë“œ**: í”„ë¡œì íŠ¸ ê°œìš”, ìµœê·¼ ìƒì„± ë¶„ì
2. **ë¶„ì ìƒì„±**: ì¡°ê±´ ì…ë ¥ â†’ AI ìƒì„± â†’ ê²°ê³¼ íƒìƒ‰
3. **ê°€ìƒ ìŠ¤í¬ë¦¬ë‹**: ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—…ë¡œë“œ â†’ ë„í‚¹ ì‹¤í–‰ â†’ íˆíŠ¸ ë¶„ì„
4. **Lead ìµœì í™”**: ì´ˆê¸° ë¶„ì â†’ RL ìµœì í™” â†’ ê°œì„  ê²½ë¡œ
5. **í”„ë¡œì íŠ¸ ê´€ë¦¬**: íŒ€ í˜‘ì—…, ë²„ì „ ê´€ë¦¬, ë‚´ë³´ë‚´ê¸°

---

### 2. ë°±ì—”ë“œ (API ì„œë²„)

#### í”„ë ˆì„ì›Œí¬
```python
# pyproject.toml
[tool.poetry.dependencies]
python = "^3.11"
fastapi = "^0.109.0"
uvicorn = "^0.27.0"
pydantic = "^2.5.0"
celery = "^5.3.0"           # ë¹„ë™ê¸° ì‘ì—… í
redis = "^5.0.0"            # Celery ë¸Œë¡œì»¤
azure-cosmos = "^4.5.0"     # Cosmos DB í´ë¼ì´ì–¸íŠ¸
azure-storage-blob = "^12.19.0"
azure-identity = "^1.15.0"
```

#### API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°
```python
# app/main.py
from fastapi import FastAPI

app = FastAPI(title="AI Drug Discovery API")

# ë¶„ì ìƒì„±
@app.post("/api/v1/generate")
async def generate_molecules(conditions: GenerationRequest):
    """ì¡°ê±´ ê¸°ë°˜ ë¶„ì ìƒì„±"""
    pass

# ADMET ì˜ˆì¸¡
@app.post("/api/v1/predict/admet")
async def predict_admet(molecules: List[str]):
    """SMILES ë¦¬ìŠ¤íŠ¸ â†’ ADMET íŠ¹ì„± ì˜ˆì¸¡"""
    pass

# ë¶„ì ë„í‚¹
@app.post("/api/v1/docking")
async def run_docking(target_id: str, ligands: List[str]):
    """ë‹¨ë°±ì§ˆ-ë¦¬ê°„ë“œ ë„í‚¹ ì‹œë®¬ë ˆì´ì…˜"""
    pass

# ë¶„ì ìµœì í™”
@app.post("/api/v1/optimize")
async def optimize_molecule(initial: str, objectives: Dict):
    """ê°•í™”í•™ìŠµ ê¸°ë°˜ ë¶„ì ìµœì í™”"""
    pass

# í”„ë¡œì íŠ¸ ê´€ë¦¬
@app.get("/api/v1/projects/{project_id}")
async def get_project(project_id: str):
    """í”„ë¡œì íŠ¸ ì •ë³´ ì¡°íšŒ"""
    pass
```

#### ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬
```python
# tasks/celery_app.py
from celery import Celery

celery_app = Celery(
    "drug_discovery",
    broker="redis://localhost:6379/0",
    backend="redis://localhost:6379/1"
)

@celery_app.task(bind=True)
def generate_molecules_task(self, conditions):
    """ê¸´ ì‹œê°„ ì†Œìš” ì‘ì—…ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰"""
    # ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸
    self.update_state(state='PROGRESS', meta={'current': 10, 'total': 100})
    # ... ìƒì„± ë¡œì§
    return results
```

---

### 3. AI/ML ì½”ì–´ ì—”ì§„

#### ë¶„ì ìƒì„± ëª¨ë¸

**Transformer ê¸°ë°˜ ìƒì„±**
```python
# models/generator.py
import torch
import torch.nn as nn
from transformers import GPT2LMHeadModel, GPT2Tokenizer

class MoleculeGenerator:
    def __init__(self, model_path: str):
        """ChemGPT ìŠ¤íƒ€ì¼ ë¶„ì ìƒì„±ê¸°"""
        self.tokenizer = GPT2Tokenizer.from_pretrained(model_path)
        self.model = GPT2LMHeadModel.from_pretrained(model_path)
        
    def generate(
        self, 
        prompt: str = "", 
        num_samples: int = 100,
        max_length: int = 100
    ) -> List[str]:
        """SMILES ë¶„ì ìƒì„±"""
        inputs = self.tokenizer(prompt, return_tensors="pt")
        
        outputs = self.model.generate(
            **inputs,
            max_length=max_length,
            num_return_sequences=num_samples,
            do_sample=True,
            top_k=50,
            top_p=0.95,
            temperature=1.0
        )
        
        molecules = [
            self.tokenizer.decode(output, skip_special_tokens=True)
            for output in outputs
        ]
        
        # ìœ íš¨ì„± ê²€ì¦
        valid_molecules = [
            mol for mol in molecules 
            if self.is_valid_smiles(mol)
        ]
        
        return valid_molecules
    
    def is_valid_smiles(self, smiles: str) -> bool:
        """SMILES ë¬¸ë²• ê²€ì¦"""
        from rdkit import Chem
        mol = Chem.MolFromSmiles(smiles)
        return mol is not None
```

**VAE ê¸°ë°˜ ìƒì„±**
```python
# models/vae.py
class MolecularVAE(nn.Module):
    def __init__(self, vocab_size, latent_dim=256):
        super().__init__()
        
        # Encoder
        self.encoder = nn.Sequential(
            nn.Embedding(vocab_size, 128),
            nn.GRU(128, 256, bidirectional=True, batch_first=True),
        )
        
        self.fc_mu = nn.Linear(512, latent_dim)
        self.fc_logvar = nn.Linear(512, latent_dim)
        
        # Decoder
        self.decoder = nn.Sequential(
            nn.Linear(latent_dim, 512),
            nn.GRU(512, 256, batch_first=True),
            nn.Linear(256, vocab_size)
        )
    
    def encode(self, x):
        h = self.encoder(x)
        mu = self.fc_mu(h[:, -1, :])
        logvar = self.fc_logvar(h[:, -1, :])
        return mu, logvar
    
    def reparameterize(self, mu, logvar):
        std = torch.exp(0.5 * logvar)
        eps = torch.randn_like(std)
        return mu + eps * std
    
    def decode(self, z):
        return self.decoder(z)
    
    def sample(self, num_samples: int) -> List[str]:
        """Latent spaceì—ì„œ ìƒ˜í”Œë§"""
        z = torch.randn(num_samples, self.latent_dim)
        outputs = self.decode(z)
        # SMILESë¡œ ë³€í™˜
        return self.outputs_to_smiles(outputs)
```

---

#### ADMET ì˜ˆì¸¡ ëª¨ë¸

```python
# models/admet_predictor.py
import torch
import torch.nn as nn
from torch_geometric.nn import GCNConv, global_mean_pool

class ADMETPredictor(nn.Module):
    """ê·¸ë˜í”„ ì‹ ê²½ë§ ê¸°ë°˜ ADMET ì˜ˆì¸¡"""
    
    def __init__(self, num_features, hidden_dim=128):
        super().__init__()
        
        # Graph Convolutional Layers
        self.conv1 = GCNConv(num_features, hidden_dim)
        self.conv2 = GCNConv(hidden_dim, hidden_dim)
        self.conv3 = GCNConv(hidden_dim, hidden_dim)
        
        # Multi-task heads
        self.absorption_head = nn.Linear(hidden_dim, 1)  # Caco-2 íˆ¬ê³¼ì„±
        self.distribution_head = nn.Linear(hidden_dim, 1)  # VDss
        self.metabolism_head = nn.Linear(hidden_dim, 7)  # CYP450 (7ì¢…)
        self.excretion_head = nn.Linear(hidden_dim, 1)  # ë°˜ê°ê¸°
        self.toxicity_head = nn.Linear(hidden_dim, 5)  # hERG, ê°„ë…ì„± ë“±
        
    def forward(self, data):
        x, edge_index, batch = data.x, data.edge_index, data.batch
        
        # Graph convolutions
        x = torch.relu(self.conv1(x, edge_index))
        x = torch.relu(self.conv2(x, edge_index))
        x = torch.relu(self.conv3(x, edge_index))
        
        # Global pooling
        x = global_mean_pool(x, batch)
        
        # Multi-task predictions
        return {
            'absorption': self.absorption_head(x),
            'distribution': self.distribution_head(x),
            'metabolism': self.metabolism_head(x),
            'excretion': self.excretion_head(x),
            'toxicity': self.toxicity_head(x)
        }

# ì‚¬ìš© ì˜ˆì‹œ
predictor = ADMETPredictor(num_features=9)  # ì›ì íŠ¹ì„± 9ê°œ

def predict_admet(smiles: str) -> Dict:
    """SMILES â†’ ADMET íŠ¹ì„±"""
    from rdkit import Chem
    from torch_geometric.data import Data
    
    mol = Chem.MolFromSmiles(smiles)
    
    # ë¶„ìë¥¼ ê·¸ë˜í”„ë¡œ ë³€í™˜
    graph = mol_to_graph(mol)
    
    # ì˜ˆì¸¡
    with torch.no_grad():
        predictions = predictor(graph)
    
    return {
        'absorption_caco2': predictions['absorption'].item(),
        'volume_distribution': predictions['distribution'].item(),
        'cyp450_inhibition': predictions['metabolism'].tolist(),
        'half_life': predictions['excretion'].item(),
        'toxicity_scores': predictions['toxicity'].tolist()
    }
```

---

#### ê°•í™”í•™ìŠµ ê¸°ë°˜ ìµœì í™”

```python
# models/rl_optimizer.py
import torch
from torch import nn
from stable_baselines3 import PPO
from stable_baselines3.common.env_util import make_vec_env
import gym
from gym import spaces

class MoleculeOptimizationEnv(gym.Env):
    """ë¶„ì ìµœì í™” í™˜ê²½"""
    
    def __init__(self, initial_smiles: str, target_props: Dict):
        super().__init__()
        
        self.initial_smiles = initial_smiles
        self.current_smiles = initial_smiles
        self.target_props = target_props
        
        # Action: ë¶„ì ìˆ˜ì • ì‘ì—… (ì¶”ê°€/ì œê±°/ì¹˜í™˜)
        self.action_space = spaces.Discrete(100)  # 100ê°€ì§€ ìˆ˜ì • ì•¡ì…˜
        
        # State: ë¶„ì ì„ë² ë”© (256ì°¨ì›)
        self.observation_space = spaces.Box(
            low=-np.inf, high=np.inf, shape=(256,), dtype=np.float32
        )
        
        # ëª¨ë¸ ë¡œë“œ
        self.admet_model = ADMETPredictor.load_pretrained()
        
    def step(self, action):
        """ì•¡ì…˜ ì‹¤í–‰ í›„ ë³´ìƒ ê³„ì‚°"""
        # ë¶„ì ìˆ˜ì •
        new_smiles = self.apply_action(self.current_smiles, action)
        
        # ìœ íš¨ì„± ê²€ì¦
        if not is_valid_smiles(new_smiles):
            return self._get_state(), -10, False, {}
        
        # ADMET ì˜ˆì¸¡
        props = self.admet_model.predict(new_smiles)
        
        # ë³´ìƒ ê³„ì‚°
        reward = self.calculate_reward(props)
        
        # ìƒíƒœ ì—…ë°ì´íŠ¸
        self.current_smiles = new_smiles
        done = (self.steps > 100) or (reward > 0.9)
        
        return self._get_state(), reward, done, {}
    
    def calculate_reward(self, props: Dict) -> float:
        """ë©€í‹° ëª©ì  ë³´ìƒ í•¨ìˆ˜"""
        reward = 0
        
        # ADMET ì ìˆ˜ (40%)
        admet_score = (
            props['absorption'] * 0.25 +
            (1 - props['toxicity']) * 0.25 +
            props['metabolism_stability'] * 0.25 +
            props['half_life_score'] * 0.25
        )
        reward += admet_score * 0.4
        
        # íƒ€ê²Ÿ ì¹œí™”ë„ (30%)
        affinity = predict_binding_affinity(self.current_smiles)
        reward += affinity * 0.3
        
        # í•©ì„± ê°€ëŠ¥ì„± (20%)
        sa_score = calculate_sa_score(self.current_smiles)
        reward += sa_score * 0.2
        
        # ì‹ ê·œì„± (10%)
        novelty = calculate_novelty(self.current_smiles)
        reward += novelty * 0.1
        
        return reward
    
    def apply_action(self, smiles: str, action: int) -> str:
        """ë¶„ì ìˆ˜ì • ì•¡ì…˜ ì ìš©"""
        from rdkit import Chem
        from rdkit.Chem import AllChem
        
        mol = Chem.MolFromSmiles(smiles)
        
        # ì•¡ì…˜ íƒ€ì… ê²°ì •
        action_type = action // 20
        action_param = action % 20
        
        if action_type == 0:  # ì›ì ì¶”ê°€
            new_mol = add_atom(mol, action_param)
        elif action_type == 1:  # ê²°í•© ì¶”ê°€
            new_mol = add_bond(mol, action_param)
        elif action_type == 2:  # ì›ì ì œê±°
            new_mol = remove_atom(mol, action_param)
        elif action_type == 3:  # ì›ì ì¹˜í™˜
            new_mol = substitute_atom(mol, action_param)
        else:  # ê³ ë¦¬ ì¶”ê°€
            new_mol = add_ring(mol, action_param)
        
        return Chem.MolToSmiles(new_mol)

# í•™ìŠµ ë° ìµœì í™”
def optimize_molecule(initial_smiles: str, target_props: Dict, steps: int = 1000):
    """ê°•í™”í•™ìŠµìœ¼ë¡œ ë¶„ì ìµœì í™”"""
    
    # í™˜ê²½ ìƒì„±
    env = MoleculeOptimizationEnv(initial_smiles, target_props)
    
    # PPO ì—ì´ì „íŠ¸
    model = PPO(
        "MlpPolicy",
        env,
        verbose=1,
        learning_rate=3e-4,
        n_steps=2048,
        batch_size=64,
        n_epochs=10,
    )
    
    # í•™ìŠµ
    model.learn(total_timesteps=steps)
    
    # ìµœì  ë¶„ì ë°˜í™˜
    obs = env.reset()
    done = False
    best_smiles = initial_smiles
    best_reward = -float('inf')
    
    while not done:
        action, _ = model.predict(obs, deterministic=True)
        obs, reward, done, _ = env.step(action)
        
        if reward > best_reward:
            best_reward = reward
            best_smiles = env.current_smiles
    
    return best_smiles, best_reward
```

---

#### ë¶„ì ë„í‚¹ ì‹œë®¬ë ˆì´ì…˜

```python
# models/docking.py
import subprocess
from pathlib import Path
from rdkit import Chem
from rdkit.Chem import AllChem

class MolecularDocking:
    """AutoDock Vina ë˜í¼"""
    
    def __init__(self, protein_pdbqt: str, box_center: List[float], box_size: List[float]):
        self.protein_pdbqt = protein_pdbqt
        self.box_center = box_center  # [x, y, z]
        self.box_size = box_size  # [size_x, size_y, size_z]
    
    def dock_molecule(self, smiles: str, output_dir: str) -> Dict:
        """ë‹¨ì¼ ë¶„ì ë„í‚¹"""
        # SMILES â†’ 3D êµ¬ì¡° ìƒì„±
        mol = Chem.MolFromSmiles(smiles)
        mol = Chem.AddHs(mol)
        AllChem.EmbedMolecule(mol, randomSeed=42)
        AllChem.MMFFOptimizeMolecule(mol)
        
        # PDB ì €ì¥
        ligand_pdb = f"{output_dir}/ligand.pdb"
        Chem.MolToPDBFile(mol, ligand_pdb)
        
        # PDB â†’ PDBQT ë³€í™˜ (AutoDockTools)
        ligand_pdbqt = f"{output_dir}/ligand.pdbqt"
        subprocess.run([
            "obabel", ligand_pdb, "-O", ligand_pdbqt
        ])
        
        # Vina ì‹¤í–‰
        output_pdbqt = f"{output_dir}/output.pdbqt"
        config = self._create_vina_config(ligand_pdbqt, output_pdbqt)
        
        subprocess.run([
            "vina",
            "--config", config,
            "--out", output_pdbqt,
            "--log", f"{output_dir}/log.txt"
        ])
        
        # ê²°ê³¼ íŒŒì‹±
        results = self._parse_vina_output(output_pdbqt)
        
        return {
            'smiles': smiles,
            'binding_affinity': results['affinity'],  # kcal/mol
            'poses': results['poses'],
            'interactions': self._analyze_interactions(output_pdbqt)
        }
    
    def screen_library(self, smiles_list: List[str], top_n: int = 100) -> List[Dict]:
        """í™”í•©ë¬¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¼ê´„ ìŠ¤í¬ë¦¬ë‹"""
        results = []
        
        for smiles in smiles_list:
            try:
                result = self.dock_molecule(smiles, f"temp/{hash(smiles)}")
                results.append(result)
            except Exception as e:
                print(f"Docking failed for {smiles}: {e}")
        
        # ì¹œí™”ë„ ê¸°ì¤€ ì •ë ¬
        results.sort(key=lambda x: x['binding_affinity'])
        
        return results[:top_n]
```

---

### 4. ë°ì´í„° ê´€ë¦¬ (Azure Cosmos DB)

#### ìŠ¤í‚¤ë§ˆ ì„¤ê³„

```python
# database/schemas.py
from pydantic import BaseModel, Field
from typing import List, Dict, Optional
from datetime import datetime

class Molecule(BaseModel):
    """ë¶„ì ë¬¸ì„œ"""
    id: str = Field(alias="_id")  # SMILES í•´ì‹œ
    smiles: str
    inchi: Optional[str]
    molecular_formula: str
    molecular_weight: float
    
    # ê³„ì‚°ëœ íŠ¹ì„±
    properties: Dict[str, float] = {
        "logP": 0.0,
        "tpsa": 0.0,
        "num_h_donors": 0,
        "num_h_acceptors": 0,
        "num_rotatable_bonds": 0,
    }
    
    # ADMET ì˜ˆì¸¡
    admet: Optional[Dict] = None
    
    # ë„í‚¹ ê²°ê³¼
    docking_results: List[Dict] = []
    
    # ë©”íƒ€ë°ì´í„°
    source: str  # "generated", "chembl", "pubchem"
    created_at: datetime
    project_id: Optional[str]
    
    # íŒŒí‹°ì…˜ í‚¤
    partition_key: str  # project_id

class Project(BaseModel):
    """í”„ë¡œì íŠ¸ ë¬¸ì„œ"""
    id: str
    name: str
    description: str
    
    # íƒ€ê²Ÿ ì •ë³´
    target_disease: str  # "hepatitis_b", "glp1", "alzheimers", "hair_loss"
    target_protein: str
    
    # ìƒì„± ì„¤ì •
    generation_config: Dict
    
    # í†µê³„
    stats: Dict = {
        "total_molecules": 0,
        "validated_hits": 0,
        "in_vitro_tested": 0,
    }
    
    # íŒ€
    team_members: List[str]
    created_at: datetime
    updated_at: datetime

# íƒˆëª¨ ì¹˜ë£Œì œ í”„ë¡œì íŠ¸ ì˜ˆì‹œ
"""
{
  "id": "proj_hair_001",
  "name": "JAK Inhibitor for Androgenetic Alopecia",
  "description": "JAK1/2 ì„ íƒì  ì–µì œì œë¥¼ í†µí•œ íƒˆëª¨ ì¹˜ë£Œì œ ê°œë°œ",
  "target_disease": "hair_loss",
  "target_protein": "JAK1/JAK2",
  "generation_config": {
    "objectives": {
      "jak1_affinity": -9.0,
      "jak2_affinity": -8.5,
      "scalp_penetration": 0.7,
      "low_systemic_exposure": 0.8
    },
    "constraints": {
      "molecular_weight": [150, 400],
      "logP": [1, 4],
      "tpsa": [40, 100]
    }
  },
  "stats": {
    "total_molecules": 245,
    "validated_hits": 18,
    "in_vitro_tested": 5
  },
  "team_members": ["researcher1", "researcher2"],
  "created_at": "2026-01-02T00:00:00Z",
  "updated_at": "2026-01-02T12:00:00Z"
}
"""

class Experiment(BaseModel):
    """ì‹¤í—˜ ê²°ê³¼ ë¬¸ì„œ"""
    id: str
    project_id: str
    molecule_id: str
    
    experiment_type: str  # "in_vitro", "in_vivo", "docking"
    
    # ì‹¤í—˜ ë°ì´í„°
    assay: str
    result: Dict
    
    # ë©”íƒ€
    performed_by: str
    performed_at: datetime
```

#### Cosmos DB í´ë¼ì´ì–¸íŠ¸

```python
# database/cosmos_client.py
from azure.cosmos import CosmosClient, PartitionKey
from azure.identity import DefaultAzureCredential
import os

class DrugDiscoveryDB:
    def __init__(self):
        # Azure ì¸ì¦
        credential = DefaultAzureCredential()
        endpoint = os.getenv("COSMOS_ENDPOINT")
        
        self.client = CosmosClient(endpoint, credential)
        self.database = self.client.get_database_client("drug_discovery")
        
        # ì»¨í…Œì´ë„ˆ
        self.molecules = self.database.get_container_client("molecules")
        self.projects = self.database.get_container_client("projects")
        self.experiments = self.database.get_container_client("experiments")
    
    async def create_molecule(self, molecule: Molecule) -> Molecule:
        """ë¶„ì ì €ì¥"""
        item = molecule.dict()
        created = self.molecules.create_item(body=item)
        return Molecule(**created)
    
    async def query_molecules(
        self, 
        project_id: str, 
        min_affinity: float = -8.0
    ) -> List[Molecule]:
        """í”„ë¡œì íŠ¸ì˜ ë¶„ì ì¡°íšŒ (ë„í‚¹ ìŠ¤ì½”ì–´ í•„í„°)"""
        query = """
            SELECT * FROM molecules m
            WHERE m.project_id = @project_id
            AND ARRAY_LENGTH(m.docking_results) > 0
            AND m.docking_results[0].affinity <= @min_affinity
            ORDER BY m.docking_results[0].affinity ASC
        """
        
        items = self.molecules.query_items(
            query=query,
            parameters=[
                {"name": "@project_id", "value": project_id},
                {"name": "@min_affinity", "value": min_affinity}
            ],
            partition_key=project_id
        )
        
        return [Molecule(**item) for item in items]
    
    async def vector_search_similar_molecules(
        self, 
        query_smiles: str, 
        top_k: int = 10
    ) -> List[Molecule]:
        """ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰ (Cosmos DB Vector Search)"""
        # ë¶„ì ì„ë² ë”© ìƒì„±
        embedding = self.get_molecule_embedding(query_smiles)
        
        # ë²¡í„° ê²€ìƒ‰ ì¿¼ë¦¬
        query = """
            SELECT TOP @top_k m.*, 
                   VectorDistance(m.embedding, @query_embedding) AS similarity
            FROM molecules m
            ORDER BY VectorDistance(m.embedding, @query_embedding)
        """
        
        items = self.molecules.query_items(
            query=query,
            parameters=[
                {"name": "@top_k", "value": top_k},
                {"name": "@query_embedding", "value": embedding}
            ]
        )
        
        return [Molecule(**item) for item in items]
```

---

### 5. ë°°í¬ ë° ì¸í”„ë¼ (Azure)

#### Docker ì»¨í…Œì´ë„ˆí™”

```dockerfile
# Dockerfile
FROM python:3.11-slim

# ì‹œìŠ¤í…œ ì˜ì¡´ì„±
RUN apt-get update && apt-get install -y \
    build-essential \
    libxrender1 \
    libxext6 \
    openbabel \
    autodock-vina \
    && rm -rf /var/lib/apt/lists/*

# Python íŒ¨í‚¤ì§€
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ
COPY . .

# ëª¨ë¸ ë‹¤ìš´ë¡œë“œ (ì‚¬ì „í•™ìŠµ ëª¨ë¸)
RUN python -m scripts.download_models

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 8000

# ì‹¤í–‰
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

#### Azure Container Apps ë°°í¬

```yaml
# azure-deploy.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: drug-discovery-api
spec:
  replicas: 3
  template:
    spec:
      containers:
      - name: api
        image: youracr.azurecr.io/drug-discovery:latest
        resources:
          requests:
            memory: "4Gi"
            cpu: "2"
            nvidia.com/gpu: "1"  # GPU í• ë‹¹
          limits:
            memory: "8Gi"
            cpu: "4"
            nvidia.com/gpu: "1"
        env:
        - name: COSMOS_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: azure-secrets
              key: cosmos-endpoint
        - name: AZURE_OPENAI_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: azure-secrets
              key: openai-endpoint
```

#### Bicep ì¸í”„ë¼ ì½”ë“œ

```bicep
// main.bicep
param location string = 'koreacentral'
param projectName string = 'drug-discovery'

// Cosmos DB
resource cosmosAccount 'Microsoft.DocumentDB/databaseAccounts@2023-04-15' = {
  name: '${projectName}-cosmos'
  location: location
  properties: {
    databaseAccountOfferType: 'Standard'
    locations: [
      {
        locationName: location
        failoverPriority: 0
      }
    ]
    capabilities: [
      {
        name: 'EnableServerless'  // ì„œë²„ë¦¬ìŠ¤ ëª¨ë“œ
      }
      {
        name: 'EnableNoSQLVectorSearch'  // ë²¡í„° ê²€ìƒ‰
      }
    ]
  }
}

resource database 'Microsoft.DocumentDB/databaseAccounts/sqlDatabases@2023-04-15' = {
  parent: cosmosAccount
  name: 'drug_discovery'
  properties: {
    resource: {
      id: 'drug_discovery'
    }
  }
}

resource moleculesContainer 'Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers@2023-04-15' = {
  parent: database
  name: 'molecules'
  properties: {
    resource: {
      id: 'molecules'
      partitionKey: {
        paths: ['/project_id']
        kind: 'Hash'
      }
      vectorEmbeddingPolicy: {
        vectorEmbeddings: [
          {
            path: '/embedding'
            dataType: 'float32'
            dimensions: 256
            distanceFunction: 'cosine'
          }
        ]
      }
    }
  }
}

// Container Apps
resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: '${projectName}-api'
  location: location
  properties: {
    configuration: {
      ingress: {
        external: true
        targetPort: 8000
      }
    }
    template: {
      containers: [
        {
          name: 'api'
          image: 'youracr.azurecr.io/drug-discovery:latest'
          resources: {
            cpu: json('2.0')
            memory: '4Gi'
          }
        }
      ]
      scale: {
        minReplicas: 1
        maxReplicas: 10
      }
    }
  }
}

// Blob Storage (ëª¨ë¸ ì €ì¥)
resource storageAccount 'Microsoft.Storage/storageAccounts@2023-01-01' = {
  name: '${projectName}storage'
  location: location
  sku: {
    name: 'Standard_LRS'
  }
  kind: 'StorageV2'
}
```

---

## ğŸ“¦ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ai-drug-discovery/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ EXECUTIVE_SUMMARY.md
â”‚   â”œâ”€â”€ PRODUCT_ROADMAP.md
â”‚   â””â”€â”€ TECHNICAL_ARCHITECTURE.md  (ì´ íŒŒì¼)
â”‚
â”œâ”€â”€ frontend/                    # React ì›¹ì•±
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ MoleculeViewer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerationPanel.tsx
â”‚   â”‚   â”‚   â””â”€â”€ DockingResults.tsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ next.config.js
â”‚
â”œâ”€â”€ backend/                     # FastAPI ì„œë²„
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ generation.py
â”‚   â”‚   â”‚   â”œâ”€â”€ prediction.py
â”‚   â”‚   â”‚   â””â”€â”€ docking.py
â”‚   â”‚   â”œâ”€â”€ models/              # Pydantic ëª¨ë¸
â”‚   â”‚   â””â”€â”€ dependencies.py
â”‚   â”œâ”€â”€ tasks/                   # Celery ì‘ì—…
â”‚   â”‚   â”œâ”€â”€ celery_app.py
â”‚   â”‚   â””â”€â”€ generation_tasks.py
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ ml/                          # AI/ML ì½”ì–´
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ generator.py         # ë¶„ì ìƒì„±
â”‚   â”‚   â”œâ”€â”€ admet_predictor.py   # ADMET ì˜ˆì¸¡
â”‚   â”‚   â”œâ”€â”€ rl_optimizer.py      # RL ìµœì í™”
â”‚   â”‚   â””â”€â”€ docking.py           # ë„í‚¹
â”‚   â”œâ”€â”€ training/
â”‚   â”‚   â”œâ”€â”€ train_generator.py
â”‚   â”‚   â””â”€â”€ train_admet.py
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ preprocessing.py
â”‚   â”‚   â””â”€â”€ augmentation.py
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ featurization.py     # ë¶„ì â†’ ê·¸ë˜í”„ ë³€í™˜
â”‚       â””â”€â”€ metrics.py
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ cosmos_client.py
â”‚   â”œâ”€â”€ schemas.py
â”‚   â””â”€â”€ migrations/
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ download_models.py       # ì‚¬ì „í•™ìŠµ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
â”‚   â”œâ”€â”€ ingest_chembl.py         # ChEMBL ë°ì´í„° ìˆ˜ì§‘
â”‚   â””â”€â”€ benchmark.py             # ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
â”‚
â”œâ”€â”€ infrastructure/              # IaC
â”‚   â”œâ”€â”€ bicep/
â”‚   â”‚   â”œâ”€â”€ main.bicep
â”‚   â”‚   â””â”€â”€ modules/
â”‚   â””â”€â”€ terraform/               # (ì„ íƒì  Terraform)
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_generation.py
â”‚   â”œâ”€â”€ test_admet.py
â”‚   â””â”€â”€ test_api.py
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â””â”€â”€ .env.example
```

---

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### ë¡œì»¬ ê°œë°œ í™˜ê²½

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-org/ai-drug-discovery.git
cd ai-drug-discovery

# 2. Python í™˜ê²½ (Poetry ì‚¬ìš©)
poetry install
poetry shell

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
# RDKit (ë¶„ì ì²˜ë¦¬)
conda install -c conda-forge rdkit

# AutoDock Vina (ë„í‚¹)
conda install -c conda-forge vina

# 4. í™˜ê²½ ë³€ìˆ˜
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘ (Azure ìê²©ì¦ëª… ì¶”ê°€)

# 5. ë¡œì»¬ ì„œë¹„ìŠ¤ ì‹œì‘ (Docker Compose)
docker-compose up -d

# 6. ë°±ì—”ë“œ ì‹¤í–‰
cd backend
uvicorn app.main:app --reload

# 7. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
cd frontend
npm install
npm run dev
```

### Docker Compose (ë¡œì»¬ ê°œë°œìš©)

```yaml
# docker-compose.yml
version: '3.8'

services:
  # Redis (Celery ë¸Œë¡œì»¤)
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
  
  # PostgreSQL (ë¡œì»¬ DB, ê°œë°œìš©)
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: drug_discovery
      POSTGRES_USER: dev
      POSTGRES_PASSWORD: dev
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  # FastAPI ë°±ì—”ë“œ
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - REDIS_URL=redis://redis:6379
      - DATABASE_URL=postgresql://dev:dev@postgres:5432/drug_discovery
    depends_on:
      - redis
      - postgres
    volumes:
      - ./backend:/app
      - ./ml:/ml
  
  # Celery Worker (GPU í•„ìš”)
  celery_worker:
    build: ./backend
    command: celery -A tasks.celery_app worker -l info
    environment:
      - REDIS_URL=redis://redis:6379
    depends_on:
      - redis
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
  
  # Frontend (ê°œë°œ ëª¨ë“œ)
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - NEXT_PUBLIC_API_URL=http://localhost:8000

volumes:
  postgres_data:
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```python
# tests/test_generation.py
import pytest
from ml.models.generator import MoleculeGenerator

def test_molecule_generation():
    """ë¶„ì ìƒì„± í…ŒìŠ¤íŠ¸"""
    generator = MoleculeGenerator("models/chemgpt")
    
    molecules = generator.generate(num_samples=10)
    
    assert len(molecules) > 0
    assert all(is_valid_smiles(mol) for mol in molecules)

def test_admet_prediction():
    """ADMET ì˜ˆì¸¡ í…ŒìŠ¤íŠ¸"""
    from ml.models.admet_predictor import predict_admet
    
    result = predict_admet("CCO")  # ì—íƒ„ì˜¬
    
    assert 'absorption' in result
    assert 0 <= result['toxicity_scores'][0] <= 1
```

### í†µí•© í…ŒìŠ¤íŠ¸

```python
# tests/test_api.py
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_generate_endpoint():
    """ë¶„ì ìƒì„± API í…ŒìŠ¤íŠ¸"""
    response = client.post("/api/v1/generate", json={
        "target_disease": "hepatitis_b",
        "num_samples": 10,
        "conditions": {
            "min_molecular_weight": 200,
            "max_molecular_weight": 500
        }
    })
    
    assert response.status_code == 200
    data = response.json()
    assert len(data['molecules']) == 10

def test_hair_loss_generation():
    """íƒˆëª¨ ì¹˜ë£Œì œ ìƒì„± API í…ŒìŠ¤íŠ¸"""
    response = client.post("/api/v1/generate", json={
        "target_disease": "hair_loss",
        "num_samples": 20,
        "conditions": {
            "target_pathways": ["JAK1/2_inhibition", "5AR_inhibition", "Wnt_activation"],
            "scalp_penetration": "high",
            "systemic_exposure": "low",  # ë‘í”¼ êµ­ì†Œ ì‘ìš© ì„ í˜¸
            "min_molecular_weight": 150,
            "max_molecular_weight": 400
        }
    })
    
    assert response.status_code == 200
    data = response.json()
    assert len(data['molecules']) == 20
    # JAK ì„ íƒì„± í™•ì¸
    assert all(mol['jak_selectivity'] > 0.7 for mol in data['molecules'])
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### Azure Application Insights

```python
# app/monitoring.py
from opencensus.ext.azure.log_exporter import AzureLogHandler
import logging

logger = logging.getLogger(__name__)
logger.addHandler(AzureLogHandler(
    connection_string='InstrumentationKey=your-key'
))

# ì‚¬ìš©
logger.info("Generated 100 molecules", extra={
    'custom_dimensions': {
        'target': 'hepatitis_b',
        'success_rate': 0.85
    }
})
```

### ë©”íŠ¸ë¦­ ì¶”ì 

```python
# app/metrics.py
from prometheus_client import Counter, Histogram

generation_counter = Counter(
    'molecules_generated_total',
    'Total molecules generated',
    ['target_disease']
)

generation_latency = Histogram(
    'generation_latency_seconds',
    'Molecule generation latency'
)

# ì‚¬ìš©
with generation_latency.time():
    molecules = generator.generate(100)
    generation_counter.labels(target_disease='hepatitis_b').inc(100)
```

---

## ğŸš€ CI/CD íŒŒì´í”„ë¼ì¸

### GitHub Actions

```yaml
# .github/workflows/deploy.yml
name: Deploy to Azure

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          pip install poetry
          poetry install
      
      - name: Run tests
        run: poetry run pytest
      
      - name: Lint
        run: poetry run ruff check .
  
  build-and-push:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Login to Azure Container Registry
        uses: azure/docker-login@v1
        with:
          login-server: ${{ secrets.ACR_LOGIN_SERVER }}
          username: ${{ secrets.ACR_USERNAME }}
          password: ${{ secrets.ACR_PASSWORD }}
      
      - name: Build and push
        run: |
          docker build -t ${{ secrets.ACR_LOGIN_SERVER }}/drug-discovery:${{ github.sha }} .
          docker push ${{ secrets.ACR_LOGIN_SERVER }}/drug-discovery:${{ github.sha }}
  
  deploy:
    needs: build-and-push
    runs-on: ubuntu-latest
    steps:
      - name: Azure Login
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}
      
      - name: Deploy to Container Apps
        run: |
          az containerapp update \
            --name drug-discovery-api \
            --resource-group drug-discovery-rg \
            --image ${{ secrets.ACR_LOGIN_SERVER }}/drug-discovery:${{ github.sha }}
```

---

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„

1. **ì¦‰ì‹œ ì‹¤í–‰**:
   - [ ] ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •
   - [ ] ChEMBL ë°ì´í„° ë‹¤ìš´ë¡œë“œ ë° ì „ì²˜ë¦¬
   - [ ] ì²« ë²ˆì§¸ ë¶„ì ìƒì„± ëª¨ë¸ í”„ë¡œí† íƒ€ì…

2. **1ì£¼ì¼ ë‚´**:
   - [ ] Azure ê³„ì • ì„¤ì • ë° Cosmos DB ìƒì„±
   - [ ] ADMET ì˜ˆì¸¡ ëª¨ë¸ êµ¬í˜„
   - [ ] ê¸°ë³¸ API ì—”ë“œí¬ì¸íŠ¸ ê°œë°œ

3. **1ê°œì›” ë‚´**:
   - [ ] ê°„ì—¼ íƒ€ê²Ÿ ì²« ë²ˆì§¸ í›„ë³´ ë¬¼ì§ˆ 10ê°œ ìƒì„±
   - [ ] ì›¹ UI ë² íƒ€ ë²„ì „
   - [ ] ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

---

**Last Updated**: 2026-01-02  
**Version**: 1.0  
**Author**: AI Drug Discovery Team
